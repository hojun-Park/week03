<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device=height,initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>INHAstudy</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@500&display=swap" rel="stylesheet">
    <style>
        .modal_text1{
            font-size: 30px;
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
            margin: auto;
        }
        .modal_text2{
            font-size: 25px;
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
            margin-bottom: -25px;
        }
        .modal_text3 {
            font-size: 20px;
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
        }
        .modal_text4 {
            width: 26px;
            font-size: 20px;
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
        }
        .modal_background {
            background: #7f9dff;
        }

        .check_margin{
            margin-bottom: 15px;
        }

        .modal-content{
            overflow-y: initial !important;
            border: 2px solid white;
            border-radius: 20px;
        }

        .modal-body{
            height: 500px;
            overflow-y: auto;
        }

        .row{
            margin-bottom: 20px;
        }

        .color1{
            background: brown;
        }
    </style>

    <script>
        function maxPeople(el, max) {
            if(el.value > max)  {
                alert("최대 인원 수는 100명입니다.");
                el.value=" ";
            }
        }
        function activityTime(el, max) {
            if(el.value > max)  {
                alert("소요 시간은 최대 24시간까지 가능합니다.");
                el.value=" ";
            }
        }

        function writeRoom(){
            let room_title=$(`#room_title`).val();
            let re_start_date=$(`#re_start_date`).val();
            let re_end_date=$(`#re_end_date`).val();
            let category=$(`#category`).val();
            let max_join=$(`#max_join`).val();
            let ac_start_date=$(`#ac_start_date`).val();
            let ac_end_date=$(`#ac_end_date`).val();
            let location=$(`#location`).val();
            let study_count=$(`#study_count`).val();
            let study_time=$(`#study_time`).val();
            let active_type=$(`input[name=active_type]:checked`).val();
            let info=$(`#info`).val();

            console.log(active_type);

            let data={'room_title': room_title, 're_start_date': re_start_date, 're_end_date': re_end_date, 'category': category, 'max_join': max_join, 'ac_start_date': ac_start_date, 'ac_end_date': ac_end_date, 'location': location, 'study_count': study_count, 'study_time': study_time, 'active_type': active_type, 'info': info};

            $.ajax({
                type: "POST",
                url: "/api/rooms",
                contentType: "application/json",
                data: JSON.stringify(data),
                success: function (response) {
                    alert('방이 성공적으로 생성되었습니다.');
                    window.location.reload();
                }
            })

        }
    </script>
</head>

<body>


<button type="button" class="btn btn-primary color1" data-bs-toggle="modal" data-bs-target="#exampleModal"
        data-bs-whatever="@mdo">방 생성
</button>
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content modal_background">
            <div class="modal-header">
                <h5 class="modal-title modal_text1" id="exampleModalLabel">INHA STUDY</h5>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="room_title" class="col-form-label modal_text2">방 제목</label>
                        <input type="text" class="form-control" id="room_title" placeholder="최대 50자" maxlength="50" required>
                    </div>
                    <div class="row g-3">
                        <label class="col-form-label modal_text2">모집 기간</label>
                        <div class="col">
                            <input type="date" class="form-control" id="re_start_date" placeholder="시작 일자" aria-label="re_start_date" required>
                        </div>
                        <p class="modal_text4">~</p>
                        <div class="col">
                            <input type="date" class="form-control" id="re_end_date" placeholder="종료 일자" aria-label="re_end_date" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="category" class="col-form-label modal_text2">카테고리</label>
                        <select class="form-select" id="category" aria-label="Default select example" required>
                            <option selected>카테고리</option>
                            <option value="전공 스터디">전공 스터디</option>
                            <option value="취업 스터디">취업 스터디</option>
                            <option value="자율 스터디">자율 스터디</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="max_join" class="col-form-label modal_text2">최대 입장 인원</label>
                        <input type="number" class="form-control" id="max_join" oninput='maxPeople(this, 100)' placeholder="최대 인원 100명" required>
                    </div>
                    <div class="row g-3">
                        <label class="col-form-label modal_text2">활동 기간</label>
                        <div class="col">
                            <input type="date" class="form-control" id="ac_start_date" date-placeholder="시작 일자" aria-label="ac_start_date" required>
                        </div>
                        <p class="modal_text4">~</p>
                        <div class="col">
                            <input type="date" class="form-control" id="ac_end_date" date-placeholder="종료 일자" aria-label="ac_end_date" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="location" class="col-form-label modal_text2">활동 장소</label>
                        <input type="text" class="form-control" id="location" placeholder="최대 50자" maxlength="50" required>
                    </div>
                    <div class="row g-3">
                        <label class="col-form-label modal_text2">활동 시간</label>
                        <div class="col">
                            <select class="form-select" id="study_count" aria-label="Default select example" required>
                                <option selected>스터디 횟수</option>
                                <option value="주 1회">주 1회</option>
                                <option value="주 2회">주 2회</option>
                                <option value="주 3회">주 3회</option>
                                <option value="주 4회">주 4회</option>
                                <option value="주 5회">주 5회</option>
                                <option value="주 6회">주 6회</option>
                                <option value="주 7회">주 7회</option>
                            </select>
                        </div>
                        <div class="col">
                            <input type="number" class="form-control" id="study_time" placeholder="소요 시간(숫자만 입력)" oninput='activityTime(this, 24)' aria-label="time" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label modal_text2">활동 유형</label>
                        <div class="check_margin"></div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="active_type" id="online" value="온라인" checked>
                            <label class="form-check-label modal_text3" for="online">
                                온라인
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="active_type" id="offline" value="오프라인">
                            <label class="form-check-label modal_text3" for="offline">
                                오프라인
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="active_type" id="blended" value="블렌디드">
                            <label class="form-check-label modal_text3" for="blended">
                                블렌디드
                            </label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label modal_text2">활동 소개</label>
                        <textarea rows="10" cols="10" class="form-control" id="info" placeholder="ex) 세부 활동 내용"></textarea>
                    </div>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    <button type="button" class="btn btn-primary" onclick="writeRoom()">생성</button>
                </div>
            </div>

        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>
</html>

